{"ast":null,"code":"import React, { useRef, useState, useEffect } from 'react';\nimport { Key } from '../../types.js';\nimport { focusFirstFocusableNode, findFirstKeyboardFocusableNode, findLastKeyboardFocusableNode, focusFirstKeyboardFocusableNode, focusLastKeyboardFocusableNode } from '../../utilities/focus.js';\nimport { portal } from '../shared.js';\nimport { useFocusManager } from '../../utilities/focus-manager/hooks.js';\nimport { Focus } from '../Focus/Focus.js';\nimport { EventListener } from '../EventListener/EventListener.js';\nimport { KeypressListener } from '../KeypressListener/KeypressListener.js';\n\nfunction TrapFocus(_ref) {\n  let {\n    trapping = true,\n    children\n  } = _ref;\n  const {\n    canSafelyFocus\n  } = useFocusManager({\n    trapping\n  });\n  const focusTrapWrapper = useRef(null);\n  const [disableFocus, setDisableFocus] = useState(true);\n  useEffect(() => {\n    const disable = canSafelyFocus && !(focusTrapWrapper.current && focusTrapWrapper.current.contains(document.activeElement)) ? !trapping : true;\n    setDisableFocus(disable);\n  }, [canSafelyFocus, trapping]);\n\n  const handleFocusIn = event => {\n    const containerContentsHaveFocus = focusTrapWrapper.current && focusTrapWrapper.current.contains(document.activeElement);\n\n    if (trapping === false || !focusTrapWrapper.current || containerContentsHaveFocus || event.target instanceof Element && event.target.matches(`${portal.selector} *`)) {\n      return;\n    }\n\n    if (canSafelyFocus && event.target instanceof HTMLElement && focusTrapWrapper.current !== event.target && !focusTrapWrapper.current.contains(event.target)) {\n      focusFirstFocusableNode(focusTrapWrapper.current);\n    }\n  };\n\n  const handleTab = event => {\n    if (trapping === false || !focusTrapWrapper.current) {\n      return;\n    }\n\n    const firstFocusableNode = findFirstKeyboardFocusableNode(focusTrapWrapper.current);\n    const lastFocusableNode = findLastKeyboardFocusableNode(focusTrapWrapper.current);\n\n    if (event.target === lastFocusableNode && !event.shiftKey) {\n      event.preventDefault();\n      focusFirstKeyboardFocusableNode(focusTrapWrapper.current);\n    }\n\n    if (event.target === firstFocusableNode && event.shiftKey) {\n      event.preventDefault();\n      focusLastKeyboardFocusableNode(focusTrapWrapper.current);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Focus, {\n    disabled: disableFocus,\n    root: focusTrapWrapper.current\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: focusTrapWrapper\n  }, /*#__PURE__*/React.createElement(EventListener, {\n    event: \"focusin\",\n    handler: handleFocusIn\n  }), /*#__PURE__*/React.createElement(KeypressListener, {\n    keyCode: Key.Tab,\n    keyEvent: \"keydown\",\n    handler: handleTab\n  }), children));\n}\n\nexport { TrapFocus };","map":{"version":3,"names":["React","useRef","useState","useEffect","Key","focusFirstFocusableNode","findFirstKeyboardFocusableNode","findLastKeyboardFocusableNode","focusFirstKeyboardFocusableNode","focusLastKeyboardFocusableNode","portal","useFocusManager","Focus","EventListener","KeypressListener","TrapFocus","trapping","children","canSafelyFocus","focusTrapWrapper","disableFocus","setDisableFocus","disable","current","contains","document","activeElement","handleFocusIn","event","containerContentsHaveFocus","target","Element","matches","selector","HTMLElement","handleTab","firstFocusableNode","lastFocusableNode","shiftKey","preventDefault","createElement","disabled","root","ref","handler","keyCode","Tab","keyEvent"],"sources":["/home/cedcoss/react/After interview/polarisdashoboard/node_modules/@shopify/polaris/build/esm/components/TrapFocus/TrapFocus.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport { Key } from '../../types.js';\nimport { focusFirstFocusableNode, findFirstKeyboardFocusableNode, findLastKeyboardFocusableNode, focusFirstKeyboardFocusableNode, focusLastKeyboardFocusableNode } from '../../utilities/focus.js';\nimport { portal } from '../shared.js';\nimport { useFocusManager } from '../../utilities/focus-manager/hooks.js';\nimport { Focus } from '../Focus/Focus.js';\nimport { EventListener } from '../EventListener/EventListener.js';\nimport { KeypressListener } from '../KeypressListener/KeypressListener.js';\n\nfunction TrapFocus({\n  trapping = true,\n  children\n}) {\n  const {\n    canSafelyFocus\n  } = useFocusManager({\n    trapping\n  });\n  const focusTrapWrapper = useRef(null);\n  const [disableFocus, setDisableFocus] = useState(true);\n  useEffect(() => {\n    const disable = canSafelyFocus && !(focusTrapWrapper.current && focusTrapWrapper.current.contains(document.activeElement)) ? !trapping : true;\n    setDisableFocus(disable);\n  }, [canSafelyFocus, trapping]);\n\n  const handleFocusIn = event => {\n    const containerContentsHaveFocus = focusTrapWrapper.current && focusTrapWrapper.current.contains(document.activeElement);\n\n    if (trapping === false || !focusTrapWrapper.current || containerContentsHaveFocus || event.target instanceof Element && event.target.matches(`${portal.selector} *`)) {\n      return;\n    }\n\n    if (canSafelyFocus && event.target instanceof HTMLElement && focusTrapWrapper.current !== event.target && !focusTrapWrapper.current.contains(event.target)) {\n      focusFirstFocusableNode(focusTrapWrapper.current);\n    }\n  };\n\n  const handleTab = event => {\n    if (trapping === false || !focusTrapWrapper.current) {\n      return;\n    }\n\n    const firstFocusableNode = findFirstKeyboardFocusableNode(focusTrapWrapper.current);\n    const lastFocusableNode = findLastKeyboardFocusableNode(focusTrapWrapper.current);\n\n    if (event.target === lastFocusableNode && !event.shiftKey) {\n      event.preventDefault();\n      focusFirstKeyboardFocusableNode(focusTrapWrapper.current);\n    }\n\n    if (event.target === firstFocusableNode && event.shiftKey) {\n      event.preventDefault();\n      focusLastKeyboardFocusableNode(focusTrapWrapper.current);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Focus, {\n    disabled: disableFocus,\n    root: focusTrapWrapper.current\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: focusTrapWrapper\n  }, /*#__PURE__*/React.createElement(EventListener, {\n    event: \"focusin\",\n    handler: handleFocusIn\n  }), /*#__PURE__*/React.createElement(KeypressListener, {\n    keyCode: Key.Tab,\n    keyEvent: \"keydown\",\n    handler: handleTab\n  }), children));\n}\n\nexport { TrapFocus };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}