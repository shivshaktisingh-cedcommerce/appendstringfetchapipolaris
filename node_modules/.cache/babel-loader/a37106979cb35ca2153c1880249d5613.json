{"ast":null,"code":"import React, { useRef, useEffect, useCallback, useLayoutEffect } from 'react';\nimport styles from '../../TextField.scss.js';\nimport { EventListener } from '../../../EventListener/EventListener.js';\n\nfunction Resizer(_ref) {\n  let {\n    contents,\n    currentHeight: currentHeightProp = null,\n    minimumLines,\n    onHeightChange\n  } = _ref;\n  const contentNode = useRef(null);\n  const minimumLinesNode = useRef(null);\n  const animationFrame = useRef();\n  const currentHeight = useRef(currentHeightProp);\n\n  if (currentHeightProp !== currentHeight.current) {\n    currentHeight.current = currentHeightProp;\n  }\n\n  useEffect(() => {\n    return () => {\n      if (animationFrame.current) {\n        cancelAnimationFrame(animationFrame.current);\n      }\n    };\n  }, []);\n  const minimumLinesMarkup = minimumLines ? /*#__PURE__*/React.createElement(\"div\", {\n    ref: minimumLinesNode,\n    className: styles.DummyInput,\n    dangerouslySetInnerHTML: {\n      __html: getContentsForMinimumLines(minimumLines)\n    }\n  }) : null;\n  const handleHeightCheck = useCallback(() => {\n    if (animationFrame.current) {\n      cancelAnimationFrame(animationFrame.current);\n    }\n\n    animationFrame.current = requestAnimationFrame(() => {\n      if (!contentNode.current || !minimumLinesNode.current) {\n        return;\n      }\n\n      const newHeight = Math.max(contentNode.current.offsetHeight, minimumLinesNode.current.offsetHeight);\n\n      if (newHeight !== currentHeight.current) {\n        onHeightChange(newHeight);\n      }\n    });\n  }, [onHeightChange]);\n  useLayoutEffect(() => {\n    handleHeightCheck();\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"aria-hidden\": true,\n    className: styles.Resizer\n  }, /*#__PURE__*/React.createElement(EventListener, {\n    event: \"resize\",\n    handler: handleHeightCheck\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    ref: contentNode,\n    className: styles.DummyInput,\n    dangerouslySetInnerHTML: {\n      __html: getFinalContents(contents)\n    }\n  }), minimumLinesMarkup);\n}\n\nconst ENTITIES_TO_REPLACE = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\\n': '<br>',\n  '\\r': ''\n};\nconst REPLACE_REGEX = new RegExp(`[${Object.keys(ENTITIES_TO_REPLACE).join()}]`, 'g');\n\nfunction replaceEntity(entity) {\n  return ENTITIES_TO_REPLACE[entity];\n}\n\nfunction getContentsForMinimumLines(minimumLines) {\n  let content = '';\n\n  for (let line = 0; line < minimumLines; line++) {\n    content += '<br>';\n  }\n\n  return content;\n}\n\nfunction getFinalContents(contents) {\n  return contents ? `${contents.replace(REPLACE_REGEX, replaceEntity)}<br>` : '<br>';\n}\n\nexport { Resizer };","map":{"version":3,"names":["React","useRef","useEffect","useCallback","useLayoutEffect","styles","EventListener","Resizer","contents","currentHeight","currentHeightProp","minimumLines","onHeightChange","contentNode","minimumLinesNode","animationFrame","current","cancelAnimationFrame","minimumLinesMarkup","createElement","ref","className","DummyInput","dangerouslySetInnerHTML","__html","getContentsForMinimumLines","handleHeightCheck","requestAnimationFrame","newHeight","Math","max","offsetHeight","event","handler","getFinalContents","ENTITIES_TO_REPLACE","REPLACE_REGEX","RegExp","Object","keys","join","replaceEntity","entity","content","line","replace"],"sources":["/home/cedcoss/react/After interview/polarisdashoboard/node_modules/@shopify/polaris/build/esm/components/TextField/components/Resizer/Resizer.js"],"sourcesContent":["import React, { useRef, useEffect, useCallback, useLayoutEffect } from 'react';\nimport styles from '../../TextField.scss.js';\nimport { EventListener } from '../../../EventListener/EventListener.js';\n\nfunction Resizer({\n  contents,\n  currentHeight: currentHeightProp = null,\n  minimumLines,\n  onHeightChange\n}) {\n  const contentNode = useRef(null);\n  const minimumLinesNode = useRef(null);\n  const animationFrame = useRef();\n  const currentHeight = useRef(currentHeightProp);\n\n  if (currentHeightProp !== currentHeight.current) {\n    currentHeight.current = currentHeightProp;\n  }\n\n  useEffect(() => {\n    return () => {\n      if (animationFrame.current) {\n        cancelAnimationFrame(animationFrame.current);\n      }\n    };\n  }, []);\n  const minimumLinesMarkup = minimumLines ? /*#__PURE__*/React.createElement(\"div\", {\n    ref: minimumLinesNode,\n    className: styles.DummyInput,\n    dangerouslySetInnerHTML: {\n      __html: getContentsForMinimumLines(minimumLines)\n    }\n  }) : null;\n  const handleHeightCheck = useCallback(() => {\n    if (animationFrame.current) {\n      cancelAnimationFrame(animationFrame.current);\n    }\n\n    animationFrame.current = requestAnimationFrame(() => {\n      if (!contentNode.current || !minimumLinesNode.current) {\n        return;\n      }\n\n      const newHeight = Math.max(contentNode.current.offsetHeight, minimumLinesNode.current.offsetHeight);\n\n      if (newHeight !== currentHeight.current) {\n        onHeightChange(newHeight);\n      }\n    });\n  }, [onHeightChange]);\n  useLayoutEffect(() => {\n    handleHeightCheck();\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"aria-hidden\": true,\n    className: styles.Resizer\n  }, /*#__PURE__*/React.createElement(EventListener, {\n    event: \"resize\",\n    handler: handleHeightCheck\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    ref: contentNode,\n    className: styles.DummyInput,\n    dangerouslySetInnerHTML: {\n      __html: getFinalContents(contents)\n    }\n  }), minimumLinesMarkup);\n}\nconst ENTITIES_TO_REPLACE = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\\n': '<br>',\n  '\\r': ''\n};\nconst REPLACE_REGEX = new RegExp(`[${Object.keys(ENTITIES_TO_REPLACE).join()}]`, 'g');\n\nfunction replaceEntity(entity) {\n  return ENTITIES_TO_REPLACE[entity];\n}\n\nfunction getContentsForMinimumLines(minimumLines) {\n  let content = '';\n\n  for (let line = 0; line < minimumLines; line++) {\n    content += '<br>';\n  }\n\n  return content;\n}\n\nfunction getFinalContents(contents) {\n  return contents ? `${contents.replace(REPLACE_REGEX, replaceEntity)}<br>` : '<br>';\n}\n\nexport { Resizer };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}