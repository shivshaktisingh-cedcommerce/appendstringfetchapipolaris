{"ast":null,"code":"import React, { useState, useReducer, useRef, useCallback, useEffect, Children } from 'react';\nimport { EnableSelectionMinor } from '@shopify/polaris-icons';\nimport { toPx, tokens } from '@shopify/polaris-tokens';\nimport { debounce } from '../../utilities/debounce.js';\nimport { classNames } from '../../utilities/css.js';\nimport { isElementOfType } from '../../utilities/components.js';\nimport { useLazyRef } from '../../utilities/use-lazy-ref.js';\nimport styles from './ResourceList.scss.js';\nimport { Select } from '../Select/Select.js';\nimport { ResourceItem } from '../ResourceItem/ResourceItem.js';\nimport { SELECT_ALL_ITEMS } from '../../utilities/resource-list/types.js';\nimport { useI18n } from '../../utilities/i18n/hooks.js';\nimport { BulkActions } from '../BulkActions/BulkActions.js';\nimport { Button } from '../Button/Button.js';\nimport { CheckableButton } from '../CheckableButton/CheckableButton.js';\nimport { Sticky } from '../Sticky/Sticky.js';\nimport { EventListener } from '../EventListener/EventListener.js';\nimport { EmptySearchResult } from '../EmptySearchResult/EmptySearchResult.js';\nimport { Spinner } from '../Spinner/Spinner.js';\nimport { ResourceListContext } from '../../utilities/resource-list/context.js';\nconst SMALL_SPINNER_HEIGHT = 28;\nconst LARGE_SPINNER_HEIGHT = 45;\n\nfunction getAllItemsOnPage(items, idForItem) {\n  return items.map((item, index) => {\n    return idForItem(item, index);\n  });\n}\n\nconst isBreakpointsXS = () => {\n  var _toPx;\n\n  return typeof window === 'undefined' ? false : window.innerWidth < parseFloat((_toPx = toPx(tokens.breakpoints['breakpoints-sm'])) !== null && _toPx !== void 0 ? _toPx : '');\n};\n\nfunction defaultIdForItem(item, index) {\n  return Object.prototype.hasOwnProperty.call(item, 'id') ? item.id : index.toString();\n}\n\nconst ResourceList = function ResourceList(_ref) {\n  let {\n    items,\n    filterControl,\n    emptyState,\n    emptySearchState,\n    resourceName: resourceNameProp,\n    promotedBulkActions,\n    bulkActions,\n    selectedItems = [],\n    isFiltered,\n    selectable,\n    hasMoreItems,\n    loading,\n    showHeader,\n    totalItemsCount,\n    sortValue,\n    sortOptions,\n    alternateTool,\n    onSortChange,\n    onSelectionChange,\n    renderItem,\n    idForItem = defaultIdForItem,\n    resolveItemId\n  } = _ref;\n  const i18n = useI18n();\n  const [selectMode, setSelectMode] = useState(Boolean(selectedItems && selectedItems.length > 0));\n  const [loadingPosition, setLoadingPositionState] = useState(0);\n  const [lastSelected, setLastSelected] = useState();\n  const [smallScreen, setSmallScreen] = useState(isBreakpointsXS());\n  const forceUpdate = useReducer(function () {\n    let x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    return x + 1;\n  }, 0)[1];\n  const [checkableButtons, setCheckableButtons] = useState(new Map());\n  const defaultResourceName = useLazyRef(() => ({\n    singular: i18n.translate('Polaris.ResourceList.defaultItemSingular'),\n    plural: i18n.translate('Polaris.ResourceList.defaultItemPlural')\n  }));\n  const listRef = useRef(null);\n\n  const handleSelectMode = selectMode => {\n    setSelectMode(selectMode);\n\n    if (!selectMode && onSelectionChange) {\n      onSelectionChange([]);\n    }\n  };\n\n  const handleResize = debounce(() => {\n    const newSmallScreen = isBreakpointsXS();\n\n    if (selectedItems && selectedItems.length === 0 && selectMode && !newSmallScreen) {\n      handleSelectMode(false);\n    }\n\n    if (smallScreen !== newSmallScreen) {\n      setSmallScreen(newSmallScreen);\n    }\n  }, 50, {\n    leading: true,\n    trailing: true,\n    maxWait: 50\n  });\n  const isSelectable = Boolean(promotedBulkActions && promotedBulkActions.length > 0 || bulkActions && bulkActions.length > 0 || selectable);\n\n  const bulkSelectState = () => {\n    let selectState = 'indeterminate';\n\n    if (!selectedItems || Array.isArray(selectedItems) && selectedItems.length === 0) {\n      selectState = false;\n    } else if (selectedItems === SELECT_ALL_ITEMS || Array.isArray(selectedItems) && selectedItems.length === items.length) {\n      selectState = true;\n    }\n\n    return selectState;\n  };\n\n  const resourceName = resourceNameProp ? resourceNameProp : defaultResourceName.current;\n\n  const headerTitle = () => {\n    const itemsCount = items.length;\n    const resource = !loading && (!totalItemsCount && itemsCount === 1 || totalItemsCount === 1) ? resourceName.singular : resourceName.plural;\n\n    if (loading) {\n      return i18n.translate('Polaris.ResourceList.loading', {\n        resource\n      });\n    } else if (totalItemsCount) {\n      return i18n.translate('Polaris.ResourceList.showingTotalCount', {\n        itemsCount,\n        totalItemsCount,\n        resource\n      });\n    } else {\n      return i18n.translate('Polaris.ResourceList.showing', {\n        itemsCount,\n        resource\n      });\n    }\n  };\n\n  const bulkActionsLabel = () => {\n    const selectedItemsCount = selectedItems === SELECT_ALL_ITEMS ? `${items.length}+` : selectedItems.length;\n    return i18n.translate('Polaris.ResourceList.selected', {\n      selectedItemsCount\n    });\n  };\n\n  const bulkActionsAccessibilityLabel = () => {\n    const selectedItemsCount = selectedItems.length;\n    const totalItemsCount = items.length;\n    const allSelected = selectedItemsCount === totalItemsCount;\n\n    if (totalItemsCount === 1 && allSelected) {\n      return i18n.translate('Polaris.ResourceList.a11yCheckboxDeselectAllSingle', {\n        resourceNameSingular: resourceName.singular\n      });\n    } else if (totalItemsCount === 1) {\n      return i18n.translate('Polaris.ResourceList.a11yCheckboxSelectAllSingle', {\n        resourceNameSingular: resourceName.singular\n      });\n    } else if (allSelected) {\n      return i18n.translate('Polaris.ResourceList.a11yCheckboxDeselectAllMultiple', {\n        itemsLength: items.length,\n        resourceNamePlural: resourceName.plural\n      });\n    } else {\n      return i18n.translate('Polaris.ResourceList.a11yCheckboxSelectAllMultiple', {\n        itemsLength: items.length,\n        resourceNamePlural: resourceName.plural\n      });\n    }\n  };\n\n  const paginatedSelectAllText = () => {\n    if (!isSelectable || !hasMoreItems) {\n      return;\n    }\n\n    if (selectedItems === SELECT_ALL_ITEMS) {\n      return i18n.translate(isFiltered ? 'Polaris.ResourceList.allFilteredItemsSelected' : 'Polaris.ResourceList.allItemsSelected', {\n        itemsLength: items.length,\n        resourceNamePlural: resourceName.plural\n      });\n    }\n  };\n\n  const paginatedSelectAllAction = () => {\n    if (!isSelectable || !hasMoreItems) {\n      return;\n    }\n\n    const actionText = selectedItems === SELECT_ALL_ITEMS ? i18n.translate('Polaris.Common.undo') : i18n.translate(isFiltered ? 'Polaris.ResourceList.selectAllFilteredItems' : 'Polaris.ResourceList.selectAllItems', {\n      itemsLength: items.length,\n      resourceNamePlural: resourceName.plural\n    });\n    return {\n      content: actionText,\n      onAction: handleSelectAllItemsInStore\n    };\n  };\n\n  const emptySearchResultText = {\n    title: i18n.translate('Polaris.ResourceList.emptySearchResultTitle', {\n      resourceNamePlural: resourceName.plural\n    }),\n    description: i18n.translate('Polaris.ResourceList.emptySearchResultDescription')\n  };\n\n  const handleSelectAllItemsInStore = () => {\n    const newlySelectedItems = selectedItems === SELECT_ALL_ITEMS ? getAllItemsOnPage(items, idForItem) : SELECT_ALL_ITEMS;\n\n    if (onSelectionChange) {\n      onSelectionChange(newlySelectedItems);\n    }\n  };\n\n  const setLoadingPosition = useCallback(() => {\n    if (listRef.current != null) {\n      if (typeof window === 'undefined') {\n        return;\n      }\n\n      const overlay = listRef.current.getBoundingClientRect();\n      const viewportHeight = Math.max(document.documentElement ? document.documentElement.clientHeight : 0, window.innerHeight || 0);\n      const overflow = viewportHeight - overlay.height;\n      const spinnerHeight = items.length === 1 ? SMALL_SPINNER_HEIGHT : LARGE_SPINNER_HEIGHT;\n      const spinnerPosition = overflow > 0 ? (overlay.height - spinnerHeight) / 2 : (viewportHeight - overlay.top - spinnerHeight) / 2;\n      setLoadingPositionState(spinnerPosition);\n    }\n  }, [listRef, items.length]);\n  const itemsExist = items.length > 0;\n  useEffect(() => {\n    if (loading) {\n      setLoadingPosition();\n    }\n  }, [loading, setLoadingPosition]);\n  useEffect(() => {\n    if (selectedItems && selectedItems.length > 0 && !selectMode) {\n      setSelectMode(true);\n    }\n\n    if ((!selectedItems || selectedItems.length === 0) && !isBreakpointsXS()) {\n      setSelectMode(false);\n    }\n  }, [selectedItems, selectMode]);\n  useEffect(() => {\n    forceUpdate();\n  }, [forceUpdate, items]);\n\n  const renderItemWithId = (item, index) => {\n    const id = idForItem(item, index);\n    const itemContent = renderItem(item, id, index);\n\n    if (process.env.NODE_ENV === 'development' && !isElementOfType(itemContent, ResourceItem)) {\n      // eslint-disable-next-line no-console\n      console.warn('<ResourceList /> renderItem function should return a <ResourceItem />.');\n    }\n\n    return itemContent;\n  };\n\n  const handleMultiSelectionChange = (lastSelected, currentSelected, resolveItemId) => {\n    const min = Math.min(lastSelected, currentSelected);\n    const max = Math.max(lastSelected, currentSelected);\n    return items.slice(min, max + 1).map(resolveItemId);\n  };\n\n  const handleCheckableButtonRegistration = (key, button) => {\n    if (!checkableButtons.get(key)) {\n      setCheckableButtons(new Map(checkableButtons).set(key, button));\n    }\n  };\n\n  const handleSelectionChange = (selected, id, sortOrder, shiftKey) => {\n    if (selectedItems == null || onSelectionChange == null) {\n      return;\n    }\n\n    let newlySelectedItems = selectedItems === SELECT_ALL_ITEMS ? getAllItemsOnPage(items, idForItem) : [...selectedItems];\n\n    if (sortOrder !== undefined) {\n      setLastSelected(sortOrder);\n    }\n\n    const lastSelectedFromState = lastSelected;\n    let selectedIds = [id];\n\n    if (shiftKey && lastSelectedFromState != null && sortOrder !== undefined && resolveItemId) {\n      selectedIds = handleMultiSelectionChange(lastSelectedFromState, sortOrder, resolveItemId);\n    }\n\n    newlySelectedItems = [...new Set([...newlySelectedItems, ...selectedIds])];\n\n    if (!selected) {\n      for (const selectedId of selectedIds) {\n        newlySelectedItems.splice(newlySelectedItems.indexOf(selectedId), 1);\n      }\n    }\n\n    if (newlySelectedItems.length === 0 && !isBreakpointsXS()) {\n      handleSelectMode(false);\n    } else if (newlySelectedItems.length > 0) {\n      handleSelectMode(true);\n    }\n\n    if (onSelectionChange) {\n      onSelectionChange(newlySelectedItems);\n    }\n  };\n\n  const handleToggleAll = () => {\n    let newlySelectedItems;\n\n    if (Array.isArray(selectedItems) && selectedItems.length === items.length || selectedItems === SELECT_ALL_ITEMS) {\n      newlySelectedItems = [];\n    } else {\n      newlySelectedItems = items.map((item, index) => {\n        return idForItem(item, index);\n      });\n    }\n\n    if (newlySelectedItems.length === 0 && !isBreakpointsXS()) {\n      handleSelectMode(false);\n    } else if (newlySelectedItems.length > 0) {\n      handleSelectMode(true);\n    }\n\n    let checkbox;\n\n    if (isBreakpointsXS()) {\n      checkbox = checkableButtons.get('bulkSm');\n    } else if (newlySelectedItems.length === 0) {\n      checkbox = checkableButtons.get('plain');\n    } else {\n      checkbox = checkableButtons.get('bulkLg');\n    }\n\n    if (onSelectionChange) {\n      onSelectionChange(newlySelectedItems);\n    } // setTimeout ensures execution after the Transition on BulkActions\n\n\n    setTimeout(() => {\n      checkbox && checkbox.focus();\n    }, 0);\n  };\n\n  const bulkActionsMarkup = isSelectable ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.BulkActionsWrapper\n  }, /*#__PURE__*/React.createElement(BulkActions, {\n    label: bulkActionsLabel(),\n    accessibilityLabel: bulkActionsAccessibilityLabel(),\n    selected: bulkSelectState(),\n    onToggleAll: handleToggleAll,\n    selectMode: selectMode,\n    onSelectModeToggle: handleSelectMode,\n    promotedActions: promotedBulkActions,\n    paginatedSelectAllAction: paginatedSelectAllAction(),\n    paginatedSelectAllText: paginatedSelectAllText(),\n    actions: bulkActions,\n    disabled: loading,\n    smallScreen: smallScreen\n  })) : null;\n  const filterControlMarkup = filterControl ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.FiltersWrapper\n  }, filterControl) : null;\n  const sortingSelectMarkup = sortOptions && sortOptions.length > 0 && !alternateTool ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.SortWrapper\n  }, /*#__PURE__*/React.createElement(Select, {\n    label: i18n.translate('Polaris.ResourceList.sortingLabel'),\n    labelInline: !smallScreen,\n    labelHidden: smallScreen,\n    options: sortOptions,\n    onChange: onSortChange,\n    value: sortValue,\n    disabled: selectMode\n  })) : null;\n  const alternateToolMarkup = alternateTool && !sortingSelectMarkup ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.AlternateToolWrapper\n  }, alternateTool) : null;\n  const headerTitleMarkup = /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.HeaderTitleWrapper\n  }, headerTitle());\n  const selectButtonMarkup = isSelectable ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.SelectButtonWrapper\n  }, /*#__PURE__*/React.createElement(Button, {\n    disabled: selectMode,\n    icon: EnableSelectionMinor,\n    onClick: () => handleSelectMode(true)\n  }, i18n.translate('Polaris.ResourceList.selectButtonText'))) : null;\n  const checkableButtonMarkup = isSelectable ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.CheckableButtonWrapper\n  }, /*#__PURE__*/React.createElement(CheckableButton, {\n    accessibilityLabel: bulkActionsAccessibilityLabel(),\n    label: headerTitle(),\n    onToggleAll: handleToggleAll,\n    plain: true,\n    disabled: loading\n  })) : null;\n  const needsHeader = isSelectable || sortOptions && sortOptions.length > 0 || alternateTool;\n  const headerWrapperOverlay = loading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles['HeaderWrapper-overlay']\n  }) : null;\n  const showEmptyState = emptyState && !itemsExist && !loading;\n  const showEmptySearchState = !showEmptyState && filterControl && !itemsExist && !loading;\n  const headerMarkup = !showEmptyState && showHeader !== false && !showEmptySearchState && (showHeader || needsHeader) && listRef.current && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.HeaderOuterWrapper\n  }, /*#__PURE__*/React.createElement(Sticky, {\n    boundingElement: listRef.current\n  }, isSticky => {\n    const headerClassName = classNames(styles.HeaderWrapper, sortOptions && sortOptions.length > 0 && !alternateTool && styles['HeaderWrapper-hasSort'], alternateTool && styles['HeaderWrapper-hasAlternateTool'], isSelectable && styles['HeaderWrapper-hasSelect'], loading && styles['HeaderWrapper-disabled'], isSelectable && selectMode && styles['HeaderWrapper-inSelectMode'], isSticky && styles['HeaderWrapper-isSticky']);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: headerClassName\n    }, /*#__PURE__*/React.createElement(EventListener, {\n      event: \"resize\",\n      handler: handleResize\n    }), headerWrapperOverlay, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.HeaderContentWrapper\n    }, headerTitleMarkup, checkableButtonMarkup, alternateToolMarkup, sortingSelectMarkup, selectButtonMarkup), bulkActionsMarkup);\n  }));\n  const emptySearchStateMarkup = showEmptySearchState ? emptySearchState || /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.EmptySearchResultWrapper\n  }, /*#__PURE__*/React.createElement(EmptySearchResult, Object.assign({}, emptySearchResultText, {\n    withIllustration: true\n  }))) : null;\n  const emptyStateMarkup = showEmptyState ? emptyState : null;\n  const defaultTopPadding = 8;\n  const topPadding = loadingPosition > 0 ? loadingPosition : defaultTopPadding;\n  const spinnerStyle = {\n    paddingTop: `${topPadding}px`\n  };\n  const spinnerSize = items.length < 2 ? 'small' : 'large';\n  const loadingOverlay = loading ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.SpinnerContainer,\n    style: spinnerStyle\n  }, /*#__PURE__*/React.createElement(Spinner, {\n    size: spinnerSize,\n    accessibilityLabel: \"Items are loading\"\n  })), /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.LoadingOverlay\n  })) : null;\n  const className = classNames(styles.ItemWrapper, loading && styles['ItemWrapper-isLoading']);\n  const loadingWithoutItemsMarkup = loading && !itemsExist ? /*#__PURE__*/React.createElement(\"div\", {\n    className: className,\n    tabIndex: -1\n  }, loadingOverlay) : null;\n  const resourceListClassName = classNames(styles.ResourceList, loading && styles.disabledPointerEvents, selectMode && styles.disableTextSelection);\n  const listMarkup = itemsExist ? /*#__PURE__*/React.createElement(\"ul\", {\n    className: resourceListClassName,\n    ref: listRef,\n    \"aria-live\": \"polite\",\n    \"aria-busy\": loading\n  }, loadingOverlay, Children.toArray(items.map(renderItemWithId))) : null; // This is probably a legit error but I don't have the time to refactor this\n  // eslint-disable-next-line react/jsx-no-constructed-context-values\n\n  const context = {\n    selectable: isSelectable,\n    selectedItems,\n    selectMode,\n    resourceName,\n    loading,\n    onSelectionChange: handleSelectionChange,\n    registerCheckableButtons: handleCheckableButtonRegistration\n  };\n  return /*#__PURE__*/React.createElement(ResourceListContext.Provider, {\n    value: context\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.ResourceListWrapper\n  }, filterControlMarkup, headerMarkup, listMarkup, emptySearchStateMarkup, emptyStateMarkup, loadingWithoutItemsMarkup));\n};\n\nResourceList.Item = ResourceItem;\nexport { ResourceList };","map":{"version":3,"names":["React","useState","useReducer","useRef","useCallback","useEffect","Children","EnableSelectionMinor","toPx","tokens","debounce","classNames","isElementOfType","useLazyRef","styles","Select","ResourceItem","SELECT_ALL_ITEMS","useI18n","BulkActions","Button","CheckableButton","Sticky","EventListener","EmptySearchResult","Spinner","ResourceListContext","SMALL_SPINNER_HEIGHT","LARGE_SPINNER_HEIGHT","getAllItemsOnPage","items","idForItem","map","item","index","isBreakpointsXS","_toPx","window","innerWidth","parseFloat","breakpoints","defaultIdForItem","Object","prototype","hasOwnProperty","call","id","toString","ResourceList","filterControl","emptyState","emptySearchState","resourceName","resourceNameProp","promotedBulkActions","bulkActions","selectedItems","isFiltered","selectable","hasMoreItems","loading","showHeader","totalItemsCount","sortValue","sortOptions","alternateTool","onSortChange","onSelectionChange","renderItem","resolveItemId","i18n","selectMode","setSelectMode","Boolean","length","loadingPosition","setLoadingPositionState","lastSelected","setLastSelected","smallScreen","setSmallScreen","forceUpdate","x","checkableButtons","setCheckableButtons","Map","defaultResourceName","singular","translate","plural","listRef","handleSelectMode","handleResize","newSmallScreen","leading","trailing","maxWait","isSelectable","bulkSelectState","selectState","Array","isArray","current","headerTitle","itemsCount","resource","bulkActionsLabel","selectedItemsCount","bulkActionsAccessibilityLabel","allSelected","resourceNameSingular","itemsLength","resourceNamePlural","paginatedSelectAllText","paginatedSelectAllAction","actionText","content","onAction","handleSelectAllItemsInStore","emptySearchResultText","title","description","newlySelectedItems","setLoadingPosition","overlay","getBoundingClientRect","viewportHeight","Math","max","document","documentElement","clientHeight","innerHeight","overflow","height","spinnerHeight","spinnerPosition","top","itemsExist","renderItemWithId","itemContent","process","env","NODE_ENV","console","warn","handleMultiSelectionChange","currentSelected","min","slice","handleCheckableButtonRegistration","key","button","get","set","handleSelectionChange","selected","sortOrder","shiftKey","undefined","lastSelectedFromState","selectedIds","Set","selectedId","splice","indexOf","handleToggleAll","checkbox","setTimeout","focus","bulkActionsMarkup","createElement","className","BulkActionsWrapper","label","accessibilityLabel","onToggleAll","onSelectModeToggle","promotedActions","actions","disabled","filterControlMarkup","FiltersWrapper","sortingSelectMarkup","SortWrapper","labelInline","labelHidden","options","onChange","value","alternateToolMarkup","AlternateToolWrapper","headerTitleMarkup","HeaderTitleWrapper","selectButtonMarkup","SelectButtonWrapper","icon","onClick","checkableButtonMarkup","CheckableButtonWrapper","plain","needsHeader","headerWrapperOverlay","showEmptyState","showEmptySearchState","headerMarkup","HeaderOuterWrapper","boundingElement","isSticky","headerClassName","HeaderWrapper","event","handler","HeaderContentWrapper","emptySearchStateMarkup","EmptySearchResultWrapper","assign","withIllustration","emptyStateMarkup","defaultTopPadding","topPadding","spinnerStyle","paddingTop","spinnerSize","loadingOverlay","Fragment","SpinnerContainer","style","size","LoadingOverlay","ItemWrapper","loadingWithoutItemsMarkup","tabIndex","resourceListClassName","disabledPointerEvents","disableTextSelection","listMarkup","ref","toArray","context","registerCheckableButtons","Provider","ResourceListWrapper","Item"],"sources":["/home/cedcoss/react/After interview/polarisdashoboard/node_modules/@shopify/polaris/build/esm/components/ResourceList/ResourceList.js"],"sourcesContent":["import React, { useState, useReducer, useRef, useCallback, useEffect, Children } from 'react';\nimport { EnableSelectionMinor } from '@shopify/polaris-icons';\nimport { toPx, tokens } from '@shopify/polaris-tokens';\nimport { debounce } from '../../utilities/debounce.js';\nimport { classNames } from '../../utilities/css.js';\nimport { isElementOfType } from '../../utilities/components.js';\nimport { useLazyRef } from '../../utilities/use-lazy-ref.js';\nimport styles from './ResourceList.scss.js';\nimport { Select } from '../Select/Select.js';\nimport { ResourceItem } from '../ResourceItem/ResourceItem.js';\nimport { SELECT_ALL_ITEMS } from '../../utilities/resource-list/types.js';\nimport { useI18n } from '../../utilities/i18n/hooks.js';\nimport { BulkActions } from '../BulkActions/BulkActions.js';\nimport { Button } from '../Button/Button.js';\nimport { CheckableButton } from '../CheckableButton/CheckableButton.js';\nimport { Sticky } from '../Sticky/Sticky.js';\nimport { EventListener } from '../EventListener/EventListener.js';\nimport { EmptySearchResult } from '../EmptySearchResult/EmptySearchResult.js';\nimport { Spinner } from '../Spinner/Spinner.js';\nimport { ResourceListContext } from '../../utilities/resource-list/context.js';\n\nconst SMALL_SPINNER_HEIGHT = 28;\nconst LARGE_SPINNER_HEIGHT = 45;\n\nfunction getAllItemsOnPage(items, idForItem) {\n  return items.map((item, index) => {\n    return idForItem(item, index);\n  });\n}\n\nconst isBreakpointsXS = () => {\n  var _toPx;\n\n  return typeof window === 'undefined' ? false : window.innerWidth < parseFloat((_toPx = toPx(tokens.breakpoints['breakpoints-sm'])) !== null && _toPx !== void 0 ? _toPx : '');\n};\n\nfunction defaultIdForItem(item, index) {\n  return Object.prototype.hasOwnProperty.call(item, 'id') ? item.id : index.toString();\n}\n\nconst ResourceList = function ResourceList({\n  items,\n  filterControl,\n  emptyState,\n  emptySearchState,\n  resourceName: resourceNameProp,\n  promotedBulkActions,\n  bulkActions,\n  selectedItems = [],\n  isFiltered,\n  selectable,\n  hasMoreItems,\n  loading,\n  showHeader,\n  totalItemsCount,\n  sortValue,\n  sortOptions,\n  alternateTool,\n  onSortChange,\n  onSelectionChange,\n  renderItem,\n  idForItem = defaultIdForItem,\n  resolveItemId\n}) {\n  const i18n = useI18n();\n  const [selectMode, setSelectMode] = useState(Boolean(selectedItems && selectedItems.length > 0));\n  const [loadingPosition, setLoadingPositionState] = useState(0);\n  const [lastSelected, setLastSelected] = useState();\n  const [smallScreen, setSmallScreen] = useState(isBreakpointsXS());\n  const forceUpdate = useReducer((x = 0) => x + 1, 0)[1];\n  const [checkableButtons, setCheckableButtons] = useState(new Map());\n  const defaultResourceName = useLazyRef(() => ({\n    singular: i18n.translate('Polaris.ResourceList.defaultItemSingular'),\n    plural: i18n.translate('Polaris.ResourceList.defaultItemPlural')\n  }));\n  const listRef = useRef(null);\n\n  const handleSelectMode = selectMode => {\n    setSelectMode(selectMode);\n\n    if (!selectMode && onSelectionChange) {\n      onSelectionChange([]);\n    }\n  };\n\n  const handleResize = debounce(() => {\n    const newSmallScreen = isBreakpointsXS();\n\n    if (selectedItems && selectedItems.length === 0 && selectMode && !newSmallScreen) {\n      handleSelectMode(false);\n    }\n\n    if (smallScreen !== newSmallScreen) {\n      setSmallScreen(newSmallScreen);\n    }\n  }, 50, {\n    leading: true,\n    trailing: true,\n    maxWait: 50\n  });\n  const isSelectable = Boolean(promotedBulkActions && promotedBulkActions.length > 0 || bulkActions && bulkActions.length > 0 || selectable);\n\n  const bulkSelectState = () => {\n    let selectState = 'indeterminate';\n\n    if (!selectedItems || Array.isArray(selectedItems) && selectedItems.length === 0) {\n      selectState = false;\n    } else if (selectedItems === SELECT_ALL_ITEMS || Array.isArray(selectedItems) && selectedItems.length === items.length) {\n      selectState = true;\n    }\n\n    return selectState;\n  };\n\n  const resourceName = resourceNameProp ? resourceNameProp : defaultResourceName.current;\n\n  const headerTitle = () => {\n    const itemsCount = items.length;\n    const resource = !loading && (!totalItemsCount && itemsCount === 1 || totalItemsCount === 1) ? resourceName.singular : resourceName.plural;\n\n    if (loading) {\n      return i18n.translate('Polaris.ResourceList.loading', {\n        resource\n      });\n    } else if (totalItemsCount) {\n      return i18n.translate('Polaris.ResourceList.showingTotalCount', {\n        itemsCount,\n        totalItemsCount,\n        resource\n      });\n    } else {\n      return i18n.translate('Polaris.ResourceList.showing', {\n        itemsCount,\n        resource\n      });\n    }\n  };\n\n  const bulkActionsLabel = () => {\n    const selectedItemsCount = selectedItems === SELECT_ALL_ITEMS ? `${items.length}+` : selectedItems.length;\n    return i18n.translate('Polaris.ResourceList.selected', {\n      selectedItemsCount\n    });\n  };\n\n  const bulkActionsAccessibilityLabel = () => {\n    const selectedItemsCount = selectedItems.length;\n    const totalItemsCount = items.length;\n    const allSelected = selectedItemsCount === totalItemsCount;\n\n    if (totalItemsCount === 1 && allSelected) {\n      return i18n.translate('Polaris.ResourceList.a11yCheckboxDeselectAllSingle', {\n        resourceNameSingular: resourceName.singular\n      });\n    } else if (totalItemsCount === 1) {\n      return i18n.translate('Polaris.ResourceList.a11yCheckboxSelectAllSingle', {\n        resourceNameSingular: resourceName.singular\n      });\n    } else if (allSelected) {\n      return i18n.translate('Polaris.ResourceList.a11yCheckboxDeselectAllMultiple', {\n        itemsLength: items.length,\n        resourceNamePlural: resourceName.plural\n      });\n    } else {\n      return i18n.translate('Polaris.ResourceList.a11yCheckboxSelectAllMultiple', {\n        itemsLength: items.length,\n        resourceNamePlural: resourceName.plural\n      });\n    }\n  };\n\n  const paginatedSelectAllText = () => {\n    if (!isSelectable || !hasMoreItems) {\n      return;\n    }\n\n    if (selectedItems === SELECT_ALL_ITEMS) {\n      return i18n.translate(isFiltered ? 'Polaris.ResourceList.allFilteredItemsSelected' : 'Polaris.ResourceList.allItemsSelected', {\n        itemsLength: items.length,\n        resourceNamePlural: resourceName.plural\n      });\n    }\n  };\n\n  const paginatedSelectAllAction = () => {\n    if (!isSelectable || !hasMoreItems) {\n      return;\n    }\n\n    const actionText = selectedItems === SELECT_ALL_ITEMS ? i18n.translate('Polaris.Common.undo') : i18n.translate(isFiltered ? 'Polaris.ResourceList.selectAllFilteredItems' : 'Polaris.ResourceList.selectAllItems', {\n      itemsLength: items.length,\n      resourceNamePlural: resourceName.plural\n    });\n    return {\n      content: actionText,\n      onAction: handleSelectAllItemsInStore\n    };\n  };\n\n  const emptySearchResultText = {\n    title: i18n.translate('Polaris.ResourceList.emptySearchResultTitle', {\n      resourceNamePlural: resourceName.plural\n    }),\n    description: i18n.translate('Polaris.ResourceList.emptySearchResultDescription')\n  };\n\n  const handleSelectAllItemsInStore = () => {\n    const newlySelectedItems = selectedItems === SELECT_ALL_ITEMS ? getAllItemsOnPage(items, idForItem) : SELECT_ALL_ITEMS;\n\n    if (onSelectionChange) {\n      onSelectionChange(newlySelectedItems);\n    }\n  };\n\n  const setLoadingPosition = useCallback(() => {\n    if (listRef.current != null) {\n      if (typeof window === 'undefined') {\n        return;\n      }\n\n      const overlay = listRef.current.getBoundingClientRect();\n      const viewportHeight = Math.max(document.documentElement ? document.documentElement.clientHeight : 0, window.innerHeight || 0);\n      const overflow = viewportHeight - overlay.height;\n      const spinnerHeight = items.length === 1 ? SMALL_SPINNER_HEIGHT : LARGE_SPINNER_HEIGHT;\n      const spinnerPosition = overflow > 0 ? (overlay.height - spinnerHeight) / 2 : (viewportHeight - overlay.top - spinnerHeight) / 2;\n      setLoadingPositionState(spinnerPosition);\n    }\n  }, [listRef, items.length]);\n  const itemsExist = items.length > 0;\n  useEffect(() => {\n    if (loading) {\n      setLoadingPosition();\n    }\n  }, [loading, setLoadingPosition]);\n  useEffect(() => {\n    if (selectedItems && selectedItems.length > 0 && !selectMode) {\n      setSelectMode(true);\n    }\n\n    if ((!selectedItems || selectedItems.length === 0) && !isBreakpointsXS()) {\n      setSelectMode(false);\n    }\n  }, [selectedItems, selectMode]);\n  useEffect(() => {\n    forceUpdate();\n  }, [forceUpdate, items]);\n\n  const renderItemWithId = (item, index) => {\n    const id = idForItem(item, index);\n    const itemContent = renderItem(item, id, index);\n\n    if (process.env.NODE_ENV === 'development' && !isElementOfType(itemContent, ResourceItem)) {\n      // eslint-disable-next-line no-console\n      console.warn('<ResourceList /> renderItem function should return a <ResourceItem />.');\n    }\n\n    return itemContent;\n  };\n\n  const handleMultiSelectionChange = (lastSelected, currentSelected, resolveItemId) => {\n    const min = Math.min(lastSelected, currentSelected);\n    const max = Math.max(lastSelected, currentSelected);\n    return items.slice(min, max + 1).map(resolveItemId);\n  };\n\n  const handleCheckableButtonRegistration = (key, button) => {\n    if (!checkableButtons.get(key)) {\n      setCheckableButtons(new Map(checkableButtons).set(key, button));\n    }\n  };\n\n  const handleSelectionChange = (selected, id, sortOrder, shiftKey) => {\n    if (selectedItems == null || onSelectionChange == null) {\n      return;\n    }\n\n    let newlySelectedItems = selectedItems === SELECT_ALL_ITEMS ? getAllItemsOnPage(items, idForItem) : [...selectedItems];\n\n    if (sortOrder !== undefined) {\n      setLastSelected(sortOrder);\n    }\n\n    const lastSelectedFromState = lastSelected;\n    let selectedIds = [id];\n\n    if (shiftKey && lastSelectedFromState != null && sortOrder !== undefined && resolveItemId) {\n      selectedIds = handleMultiSelectionChange(lastSelectedFromState, sortOrder, resolveItemId);\n    }\n\n    newlySelectedItems = [...new Set([...newlySelectedItems, ...selectedIds])];\n\n    if (!selected) {\n      for (const selectedId of selectedIds) {\n        newlySelectedItems.splice(newlySelectedItems.indexOf(selectedId), 1);\n      }\n    }\n\n    if (newlySelectedItems.length === 0 && !isBreakpointsXS()) {\n      handleSelectMode(false);\n    } else if (newlySelectedItems.length > 0) {\n      handleSelectMode(true);\n    }\n\n    if (onSelectionChange) {\n      onSelectionChange(newlySelectedItems);\n    }\n  };\n\n  const handleToggleAll = () => {\n    let newlySelectedItems;\n\n    if (Array.isArray(selectedItems) && selectedItems.length === items.length || selectedItems === SELECT_ALL_ITEMS) {\n      newlySelectedItems = [];\n    } else {\n      newlySelectedItems = items.map((item, index) => {\n        return idForItem(item, index);\n      });\n    }\n\n    if (newlySelectedItems.length === 0 && !isBreakpointsXS()) {\n      handleSelectMode(false);\n    } else if (newlySelectedItems.length > 0) {\n      handleSelectMode(true);\n    }\n\n    let checkbox;\n\n    if (isBreakpointsXS()) {\n      checkbox = checkableButtons.get('bulkSm');\n    } else if (newlySelectedItems.length === 0) {\n      checkbox = checkableButtons.get('plain');\n    } else {\n      checkbox = checkableButtons.get('bulkLg');\n    }\n\n    if (onSelectionChange) {\n      onSelectionChange(newlySelectedItems);\n    } // setTimeout ensures execution after the Transition on BulkActions\n\n\n    setTimeout(() => {\n      checkbox && checkbox.focus();\n    }, 0);\n  };\n\n  const bulkActionsMarkup = isSelectable ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.BulkActionsWrapper\n  }, /*#__PURE__*/React.createElement(BulkActions, {\n    label: bulkActionsLabel(),\n    accessibilityLabel: bulkActionsAccessibilityLabel(),\n    selected: bulkSelectState(),\n    onToggleAll: handleToggleAll,\n    selectMode: selectMode,\n    onSelectModeToggle: handleSelectMode,\n    promotedActions: promotedBulkActions,\n    paginatedSelectAllAction: paginatedSelectAllAction(),\n    paginatedSelectAllText: paginatedSelectAllText(),\n    actions: bulkActions,\n    disabled: loading,\n    smallScreen: smallScreen\n  })) : null;\n  const filterControlMarkup = filterControl ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.FiltersWrapper\n  }, filterControl) : null;\n  const sortingSelectMarkup = sortOptions && sortOptions.length > 0 && !alternateTool ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.SortWrapper\n  }, /*#__PURE__*/React.createElement(Select, {\n    label: i18n.translate('Polaris.ResourceList.sortingLabel'),\n    labelInline: !smallScreen,\n    labelHidden: smallScreen,\n    options: sortOptions,\n    onChange: onSortChange,\n    value: sortValue,\n    disabled: selectMode\n  })) : null;\n  const alternateToolMarkup = alternateTool && !sortingSelectMarkup ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.AlternateToolWrapper\n  }, alternateTool) : null;\n  const headerTitleMarkup = /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.HeaderTitleWrapper\n  }, headerTitle());\n  const selectButtonMarkup = isSelectable ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.SelectButtonWrapper\n  }, /*#__PURE__*/React.createElement(Button, {\n    disabled: selectMode,\n    icon: EnableSelectionMinor,\n    onClick: () => handleSelectMode(true)\n  }, i18n.translate('Polaris.ResourceList.selectButtonText'))) : null;\n  const checkableButtonMarkup = isSelectable ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.CheckableButtonWrapper\n  }, /*#__PURE__*/React.createElement(CheckableButton, {\n    accessibilityLabel: bulkActionsAccessibilityLabel(),\n    label: headerTitle(),\n    onToggleAll: handleToggleAll,\n    plain: true,\n    disabled: loading\n  })) : null;\n  const needsHeader = isSelectable || sortOptions && sortOptions.length > 0 || alternateTool;\n  const headerWrapperOverlay = loading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles['HeaderWrapper-overlay']\n  }) : null;\n  const showEmptyState = emptyState && !itemsExist && !loading;\n  const showEmptySearchState = !showEmptyState && filterControl && !itemsExist && !loading;\n  const headerMarkup = !showEmptyState && showHeader !== false && !showEmptySearchState && (showHeader || needsHeader) && listRef.current && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.HeaderOuterWrapper\n  }, /*#__PURE__*/React.createElement(Sticky, {\n    boundingElement: listRef.current\n  }, isSticky => {\n    const headerClassName = classNames(styles.HeaderWrapper, sortOptions && sortOptions.length > 0 && !alternateTool && styles['HeaderWrapper-hasSort'], alternateTool && styles['HeaderWrapper-hasAlternateTool'], isSelectable && styles['HeaderWrapper-hasSelect'], loading && styles['HeaderWrapper-disabled'], isSelectable && selectMode && styles['HeaderWrapper-inSelectMode'], isSticky && styles['HeaderWrapper-isSticky']);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: headerClassName\n    }, /*#__PURE__*/React.createElement(EventListener, {\n      event: \"resize\",\n      handler: handleResize\n    }), headerWrapperOverlay, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.HeaderContentWrapper\n    }, headerTitleMarkup, checkableButtonMarkup, alternateToolMarkup, sortingSelectMarkup, selectButtonMarkup), bulkActionsMarkup);\n  }));\n  const emptySearchStateMarkup = showEmptySearchState ? emptySearchState || /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.EmptySearchResultWrapper\n  }, /*#__PURE__*/React.createElement(EmptySearchResult, Object.assign({}, emptySearchResultText, {\n    withIllustration: true\n  }))) : null;\n  const emptyStateMarkup = showEmptyState ? emptyState : null;\n  const defaultTopPadding = 8;\n  const topPadding = loadingPosition > 0 ? loadingPosition : defaultTopPadding;\n  const spinnerStyle = {\n    paddingTop: `${topPadding}px`\n  };\n  const spinnerSize = items.length < 2 ? 'small' : 'large';\n  const loadingOverlay = loading ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.SpinnerContainer,\n    style: spinnerStyle\n  }, /*#__PURE__*/React.createElement(Spinner, {\n    size: spinnerSize,\n    accessibilityLabel: \"Items are loading\"\n  })), /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.LoadingOverlay\n  })) : null;\n  const className = classNames(styles.ItemWrapper, loading && styles['ItemWrapper-isLoading']);\n  const loadingWithoutItemsMarkup = loading && !itemsExist ? /*#__PURE__*/React.createElement(\"div\", {\n    className: className,\n    tabIndex: -1\n  }, loadingOverlay) : null;\n  const resourceListClassName = classNames(styles.ResourceList, loading && styles.disabledPointerEvents, selectMode && styles.disableTextSelection);\n  const listMarkup = itemsExist ? /*#__PURE__*/React.createElement(\"ul\", {\n    className: resourceListClassName,\n    ref: listRef,\n    \"aria-live\": \"polite\",\n    \"aria-busy\": loading\n  }, loadingOverlay, Children.toArray(items.map(renderItemWithId))) : null; // This is probably a legit error but I don't have the time to refactor this\n  // eslint-disable-next-line react/jsx-no-constructed-context-values\n\n  const context = {\n    selectable: isSelectable,\n    selectedItems,\n    selectMode,\n    resourceName,\n    loading,\n    onSelectionChange: handleSelectionChange,\n    registerCheckableButtons: handleCheckableButtonRegistration\n  };\n  return /*#__PURE__*/React.createElement(ResourceListContext.Provider, {\n    value: context\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.ResourceListWrapper\n  }, filterControlMarkup, headerMarkup, listMarkup, emptySearchStateMarkup, emptyStateMarkup, loadingWithoutItemsMarkup));\n};\nResourceList.Item = ResourceItem;\n\nexport { ResourceList };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}